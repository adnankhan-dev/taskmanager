<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ title or "Task Manager v2" }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="icon" type="image/svg+xml" href="{{ url_for('static', path='img/favicon.svg') }}">

  <!-- Chart.js (for dashboard graphs â€“ will be used later) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    html, body {
      height: 100%;
    }
    body {
      font-size: 0.95rem;
      background-color: #f4f6f9;
      min-height: 100%;
      display: flex;
      flex-direction: column;
    }

    .navbar-brand span {
      font-size: 0.75rem;
    }
    .navbar-brand small {
      font-size: 0.7rem;
      display: block;
    }

    .page-header {
      margin-bottom: 1.5rem;
    }

    .card {
      border: none;
      border-radius: 0.75rem;
    }
    .card-hover {
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.08);
    }
    .stat-card {
      border: 0;
      color: #fff;
      border-radius: 1rem;
      position: relative;
      overflow: hidden;
    }
    .stat-card::after {
      content: "";
      position: absolute;
      top: -30px;
      right: -30px;
      width: 120px;
      height: 120px;
      background: rgba(255,255,255,0.14);
      border-radius: 50%;
    }
    .stat-title {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      opacity: 0.9;
    }
    .stat-value {
      font-size: 1.9rem;
      font-weight: 700;
      line-height: 1.1;
    }
    .stat-link {
      font-size: 0.75rem;
      opacity: 0.9;
    }
    .stat-primary { background: linear-gradient(135deg, #0d6efd, #4d9bff); }
    .stat-info { background: linear-gradient(135deg, #0dcaf0, #0b7fab); }
    .stat-warning { background: linear-gradient(135deg, #b7791f, #f6ad55); }
    .stat-danger { background: linear-gradient(135deg, #dc3545, #8b1d28); }
    .navbar-modern {
      background: linear-gradient(90deg, #0b1b2b, #152c48);
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }
    .footer-modern {
      background: linear-gradient(90deg, #0b1b2b, #152c48);
      border-top: 1px solid rgba(255,255,255,0.08);
      color: #dbe7ff;
    }
    .footer-modern .footer-text {
      font-size: 0.78rem;
    }
    .footer-modern .footer-links {
      white-space: nowrap;
      font-size: 0.78rem;
    }
    .footer-modern a {
      color: #dbe7ff;
      text-decoration: none;
    }
    .footer-modern a:hover {
      color: #ffffff;
      text-decoration: underline;
    }
    .nav-pill {
      padding: 0.35rem 0.85rem;
      border-radius: 999px;
      color: #dbe7ff !important;
      transition: all 0.15s ease;
    }
    .nav-pill:hover {
      background: rgba(255,255,255,0.12);
      color: #fff !important;
    }
    .nav-pill.active {
      background: #ffffff;
      color: #0b1b2b !important;
      font-weight: 600;
    }
    .nav-cta {
      border-radius: 999px;
      padding: 0.35rem 0.9rem;
    }

    .card-shadow {
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
    }

    .overdue {
      background-color: #fff3f3;
    }
  </style>
  <!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

</head>

<body>

<!-- ================= NAVBAR ================= -->
<nav class="navbar navbar-expand-lg navbar-dark navbar-modern shadow-sm">
  <div class="container">

    <!-- Brand -->
    <a class="navbar-brand fw-semibold d-flex align-items-center gap-2" href="/dashboard">
      <img src="{{ url_for('static', path='img/uw-logo.svg') }}"
           alt="UW Logo"
           width="34"
           height="34"
           class="rounded bg-light p-1">
      <div class="d-flex flex-column lh-sm">
        <span>Task Manager</span>
        <small class="text-light opacity-75">Directorate of Academics, Advanced Studies and Research</small>
      </div>
    </a>

    <!-- Mobile Toggle -->
    <button class="navbar-toggler" type="button"
            data-bs-toggle="collapse"
            data-bs-target="#mainNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar Content -->
    <div class="collapse navbar-collapse" id="mainNavbar">

      <!-- LEFT MENU -->
      <ul class="navbar-nav me-auto gap-2">

        <li class="nav-item">
          <a class="nav-link nav-pill {% if request.url.path == '/dashboard' %}active{% endif %}"
             href="/dashboard">
            Dashboard
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link nav-pill {% if request.url.path.startswith('/ui/tasks') %}active{% endif %}"
             href="/ui/tasks">
            Tasks
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link nav-pill {% if request.url.path.startswith('/ui/quick-tasks') %}active{% endif %}"
             href="/ui/quick-tasks">
            Quick Logs
          </a>
        </li>

        {% if user and user.role == "admin" %}
        <li class="nav-item dropdown">
          <a class="nav-link nav-pill dropdown-toggle {% if request.url.path.startswith('/ui/task-types') or request.url.path.startswith('/ui/users') %}active{% endif %}"
             href="#"
             role="button"
             data-bs-toggle="dropdown"
             aria-expanded="false">
            Admin
          </a>
          <ul class="dropdown-menu">
            <li>
              <a class="dropdown-item {% if request.url.path.startswith('/ui/task-types') %}active{% endif %}"
                 href="/ui/task-types">
                Task Types
              </a>
            </li>
            <li>
              <a class="dropdown-item {% if request.url.path.startswith('/ui/users') %}active{% endif %}"
                 href="/ui/users">
                Users
              </a>
            </li>
          </ul>
        </li>
        {% endif %}

      </ul>

      <!-- RIGHT MENU -->
      {% if user %}
      <ul class="navbar-nav ms-auto align-items-lg-center gap-2">

        <li class="nav-item me-lg-2">
          <a class="nav-link nav-pill {% if request.url.path.startswith('/ui/reports') %}active{% endif %}"
             href="/ui/reports">
            Reports
          </a>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link nav-pill dropdown-toggle" href="#" role="button"
             data-bs-toggle="dropdown" aria-expanded="false">
            {{ user.username }}
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li>
              <a class="dropdown-item" href="/logout">Logout</a>
            </li>
          </ul>
        </li>

      </ul>
      {% endif %}

    </div>
  </div>
</nav>
<!-- =============== END NAVBAR =============== -->


<!-- ================= MAIN CONTENT ================= -->
<main class="container my-4 flex-grow-1">

  {% block page_header %}{% endblock %}

  <div class="card card-shadow p-4">
    {% block content %}{% endblock %}
  </div>

</main>
<!-- =============== END MAIN CONTENT =============== -->

<!-- ================= FOOTER ================= -->
<footer class="mt-4 py-2 footer-modern">
  <div class="container footer-text opacity-75">
    <div class="row align-items-center g-2">
      <div class="col-12 col-md-3 text-center text-md-start">
        Directorate of Academics, Advanced Studies and research
      </div>
      <div class="col-12 col-md-4 text-center">
        Developed by Adnan Khan | &copy; 2026 All rights reserved
      </div>
      <div class="col-12 col-md-5 text-center text-md-end footer-links">
        <a href="https://uow.edu.pk" target="_blank" rel="noopener">University of wah</a>
        <span class="mx-1">|</span>
        <a href="http://192.168.3.50:2015" target="_blank" rel="noopener">Avicenna (In Campus)</a>
        <span class="mx-1">|</span>
        <a href="http://111.68.98.212:2015" target="_blank" rel="noopener">Avicenna (Off Campus)</a>
      </div>
    </div>
  </div>
</footer>
<!-- =============== END FOOTER =============== -->


<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
